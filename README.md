# 趋势交易跟踪系统

一个用于跟踪和分析趋势交易业绩的本地Web应用程序。

## 功能特性

### 核心功能
- **交易记录管理**: 记录买入/卖出交易，支持分批操作
- **盈亏计算**: 自动计算每笔交易的盈亏金额和比例
- **持仓跟踪**: 实时跟踪持仓数量和状态
- **交易明细**: 详细记录每笔买入/卖出操作

### 统计分析（规划中）
- **多周期统计**: 按日、周、月、季度、年度统计
- **标的分析**: 按交易标的分类统计
- **绩效指标**: 计算胜率、盈亏比、平均持仓时长
- **评分系统**: 基于多维度的交易表现评分

### 数据管理
- **本地存储**: 使用SQLite数据库本地存储
- **数据安全**: 所有数据保存在本地，确保隐私安全
- **数据备份**: 支持数据库文件备份和恢复

## 安装和运行

### 环境要求
- Python 3.7+
- pip

### 安装步骤

1. **克隆或下载项目**
   ```bash
   cd trend_trade
   ```

2. **安装依赖**
   ```bash
   python3 -m pip install -r requirements.txt
   ```

3. **运行应用**
   ```bash
   python3 app.py
   ```

4. **访问应用**
   打开浏览器访问: http://127.0.0.1:8383

## 使用说明

### 1. 创建买入交易
- 点击"新建买入"按钮
- 填写标的代码、名称、价格、数量和日期
- 系统会自动计算交易金额
- 相同标的的多次买入会合并为一笔交易

### 2. 卖出操作
- 在交易列表中找到对应的持仓
- 点击"卖出"按钮
- 填写卖出价格、数量和日期
- 系统会自动计算盈亏

### 3. 查看交易详情
- 点击交易记录的"查看详情"按钮
- 可以看到完整的买入/卖出明细
- 查看盈亏统计和持仓信息

### 4. 交易状态
- **持仓中**: 仍有剩余股份未卖出
- **已平仓**: 已完全卖出，交易结束

## 数据结构

### 主要数据表

#### trades (交易主表)
- 记录每个标的的交易汇总信息
- 包含总买入、总卖出、剩余持仓等

#### trade_details (交易明细表)  
- 记录每笔具体的买入/卖出操作
- 包含价格、数量、日期、盈亏等

### 数据文件
- `trading_tracker.db`: SQLite数据库文件
- 自动创建，无需手动配置

## 技术架构

- **后端**: Flask (Python Web框架)
- **前端**: Bootstrap 5 + Chart.js
- **数据库**: SQLite
- **样式**: 自定义CSS + Bootstrap图标

## 项目结构

```
trend_trade/
├── app.py                 # 主应用文件
├── requirements.txt       # Python依赖
├── README.md             # 说明文档
├── trading_tracker.db    # 数据库文件(运行后自动生成)
├── templates/            # HTML模板
│   ├── base.html        # 基础模板
│   ├── index.html       # 首页
│   ├── trades.html      # 交易列表
│   ├── add_buy.html     # 买入页面
│   ├── add_sell.html    # 卖出页面
│   └── trade_details.html # 交易详情
└── static/              # 静态文件
    ├── css/
    │   └── style.css    # 自定义样式
    └── js/
        └── app.js       # JavaScript功能
```

## 计划功能

### 统计分析模块
- [ ] 按时间周期统计盈亏
- [ ] 标的业绩排行
- [ ] 胜率和盈亏比计算
- [ ] 风险指标分析

### 图表可视化
- [ ] 盈亏趋势图
- [ ] 持仓分布图
- [ ] 收益率分析图
- [ ] 交易频率统计

### 数据导入导出
- [ ] Excel数据导入
- [ ] 交易数据导出
- [ ] 报表生成功能

### 高级功能
- [ ] 交易提醒功能
- [ ] 市场数据集成
- [ ] 交易策略回测
- [ ] 移动端适配

## 注意事项

1. **数据安全**: 建议定期备份`trading_tracker.db`文件
2. **性能**: 大量数据时建议定期清理历史记录
3. **精度**: 价格计算精确到小数点后3位
4. **时区**: 系统使用本地时区

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进项目。

## 联系方式

如有问题或建议，请通过Issue联系。